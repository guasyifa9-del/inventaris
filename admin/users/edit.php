<?php
 goto dJQh6; v0dqf: if (mysqli_num_rows($result) == 0) { setFlashMessage("\x65\162\162\157\x72", "\x55\163\x65\162\40\164\151\144\x61\153\40\144\151\x74\145\155\165\x6b\x61\x6e\41"); header("\114\157\143\x61\x74\151\157\156\72\x20\x69\156\x64\x65\x78\x2e\160\150\160"); die; } goto LQv7j; D0gOw: ?>
"></div><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-building"></i>Departemen</label> <select class="form-select"name="user_id"><option value="">-- Pilih Departemen --</option><?php  goto kXYNv; k84_p: ?>
"required type="email"></div><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-phone"></i>No. Telepon</label> <input class="form-control"name="no_telepon"placeholder="08123456789"value="<?php  goto BoDwe; Skc5d: echo $edit_user["\x73\164\141\x74\x75\163"] == "\x49\156\141\143\164\x69\166\145" ? "\163\145\154\145\x63\x74\x65\x64" : ''; goto Rjj28; EWwn1: echo $edit_user["\x73\164\x61\164\x75\163"] == "\x41\143\164\151\166\x65" ? "\163\145\x6c\145\x63\164\145\144" : ''; goto VQLfR; JbT9S: ?>
<!doctypehtml><html lang="id"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1"name="viewport"><title>Edit User - Admin</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"rel="stylesheet"><style>@import url(https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap);:root{--primary:#2563eb;--primary-dark:#1e40af;--secondary:#3b82f6;--success:#059669;--warning:#d97706;--danger:#dc2626;--info:#0891b2;--dark:#1e293b;--light:#f8fafc}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Poppins,sans-serif;background:#f1f5f9;min-height:100vh;position:relative;overflow-x:hidden}body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#e0f2fe 0,#dbeafe 50%,#e0e7ff 100%);z-index:0;pointer-events:none}.content{margin-left:260px;padding:40px;position:relative;z-index:1}.page-header{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;padding:25px 30px;margin-bottom:30px;box-shadow:0 4px 20px rgba(0,0,0,.08);border:1px solid rgba(255,255,255,.3);display:flex;justify-content:space-between;align-items:center}.page-header h2{color:var(--dark);font-weight:700;margin:0;font-size:1.75rem}.alert-modern{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:15px;border:none;box-shadow:0 4px 20px rgba(0,0,0,.08);padding:20px}.form-card{background:rgba(255,255,255,.98);backdrop-filter:blur(20px);border-radius:20px;border:1px solid rgba(255,255,255,.3);box-shadow:0 4px 20px rgba(0,0,0,.08);overflow:hidden}.form-card .card-header{background:linear-gradient(135deg,#2563eb,#1e40af);color:#fff;padding:20px 30px;border:none}.form-card .card-body{padding:30px}.form-label{font-weight:600;color:var(--dark);margin-bottom:8px;font-size:.9rem}.form-label i{color:var(--primary);margin-right:5px}.form-control,.form-select{border-radius:10px;border:2px solid #e2e8f0;padding:12px 15px;transition:all .3s;font-size:.95rem}.form-control:focus,.form-select:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.1)}.form-text{color:#64748b;font-size:.8rem;margin-top:5px}.btn{border-radius:10px;font-weight:500;padding:12px 24px;transition:all .3s;border:none}.btn-primary{background:linear-gradient(135deg,#2563eb,#1e40af);color:#fff;box-shadow:0 4px 12px rgba(37,99,235,.3)}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(37,99,235,.4);color:#fff}.btn-secondary{background:#64748b;color:#fff}.btn-secondary:hover{background:#475569;color:#fff;transform:translateY(-2px)}.avatar-preview{width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg,#eff6ff,#dbeafe);border:3px solid var(--primary);display:flex;align-items:center;justify-content:center;font-size:3rem;color:var(--primary);margin:0 auto 20px;box-shadow:0 4px 12px rgba(37,99,235,.2)}.required{color:var(--danger)}@media (max-width:768px){.sidebar{transform:translateX(-100%)}.content{margin-left:0;padding:20px}}</style></head><body><?php  goto CCvJe; dJQh6: session_start(); goto Q1xPf; Xf29i: ?>
<div class="content"><div class="page-header"><div><h2><i class="fas me-2 fa-user-edit"style="color:var(--primary)"></i>Edit User</h2><p class="mb-0 text-muted"style="font-size:.95rem">Perbarui informasi user</p></div><a class="btn btn-secondary"href="index.php"><i class="fas me-2 fa-arrow-left"></i>Kembali</a></div><?php  goto STJpZ; STJpZ: if ($flash) { ?>
<div class="alert alert-<?php  echo $flash["\164\171\160\145"]; ?>
alert-modern alert-dismissible fade show mb-4"><i class="fas fa-<?php  echo $flash["\164\171\x70\145"] == "\x73\x75\x63\143\x65\x73\163" ? "\143\150\145\143\153\x2d\143\x69\162\x63\x6c\145" : "\145\x78\143\x6c\141\x6d\x61\x74\151\157\x6e\x2d\143\x69\x72\x63\154\x65"; ?>
me-2"></i><?php  echo htmlspecialchars($flash["\155\x65\x73\x73\141\147\145"]); ?>
<button class="btn-close"type="button"data-bs-dismiss="alert"></button></div><?php  } goto ib73d; kXYNv: while ($dept = mysqli_fetch_assoc($dept_query)) { ?>
<option value="<?php  echo $dept["\165\163\145\x72\137\151\144"]; ?>
"<?php  echo $edit_user["\x75\x73\145\x72\137\x69\x64"] == $dept["\165\x73\145\x72\137\x69\144"] ? "\163\x65\x6c\145\x63\x74\x65\x64" : ''; ?>
><?php  echo htmlspecialchars($dept["\144\x65\x70\141\162\x74\145\155\145\x6e"]); ?>
</option><?php  } goto GN3R7; S_v1O: ?>
</div><form action=""method="POST"><div class="row"><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-user"></i>Nama Lengkap <span class="required">*</span></label> <input class="form-control"name="nama_lengkap"placeholder="Masukkan nama lengkap"value="<?php  goto a6Ypq; DEwZr: require_once __DIR__ . "\x2f\x2e\x2e\57\56\56\57\x6c\x69\142\x2f\146\165\156\x63\164\x69\x6f\156\x73\x2e\x70\150\x70"; goto KNwWG; XB3_3: if ($_SERVER["\x52\x45\121\125\105\x53\x54\137\115\105\124\110\117\104"] == "\120\x4f\x53\x54") { $nama_lengkap = mysqli_real_escape_string($connection, trim($_POST["\x6e\x61\x6d\141\x5f\154\145\x6e\147\153\x61\x70"])); $username = mysqli_real_escape_string($connection, trim($_POST["\165\x73\145\162\156\x61\x6d\x65"])); $email = mysqli_real_escape_string($connection, trim($_POST["\x65\x6d\x61\151\154"])); $no_telepon = mysqli_real_escape_string($connection, trim($_POST["\156\157\x5f\164\x65\x6c\x65\x70\157\156"])); $user_id = isset($_POST["\165\163\x65\162\137\x69\x64"]) ? (int) $_POST["\165\163\145\162\x5f\x69\x64"] : null; $role = mysqli_real_escape_string($connection, $_POST["\162\157\154\x65"]); $status = mysqli_real_escape_string($connection, $_POST["\163\164\x61\164\165\x73"]); $password = trim($_POST["\x70\141\x73\x73\167\x6f\162\144"]); if (empty($nama_lengkap) || empty($username) || empty($email) || empty($role)) { setFlashMessage("\145\162\162\x6f\x72", "\123\145\155\165\x61\40\146\151\145\154\x64\x20\167\x61\152\x69\142\x20\144\151\151\163\x69\41"); } else { $check_username = mysqli_query($connection, "\x53\x45\x4c\105\103\x54\40\x2a\x20\106\122\x4f\115\40\165\x73\x65\x72\163\40\x57\110\105\x52\105\40\165\163\x65\x72\156\141\155\x65\x20\x3d\x20\47{$username}\x27\40\x41\116\104\x20\x75\163\145\162\137\151\144\x20\x21\75\x20{$user_id}"); if (mysqli_num_rows($check_username) > 0) { setFlashMessage("\145\162\162\157\x72", "\x55\x73\x65\x72\x6e\141\155\145\40\x73\x75\x64\141\150\x20\144\151\147\165\156\x61\x6b\x61\x6e\41"); } else { $check_email = mysqli_query($connection, "\123\x45\x4c\105\x43\x54\40\x2a\40\106\122\x4f\x4d\40\165\163\x65\162\163\x20\127\110\x45\x52\x45\x20\145\x6d\x61\x69\154\40\75\40\x27{$email}\47\40\x41\116\x44\x20\x75\163\145\x72\x5f\151\x64\40\x21\x3d\x20{$user_id}"); if (mysqli_num_rows($check_email) > 0) { setFlashMessage("\x65\x72\162\x6f\x72", "\105\155\x61\x69\154\40\163\165\x64\x61\x68\x20\x64\151\x67\x75\x6e\141\x6b\x61\x6e\41"); } else { $update_query = "\125\x50\x44\x41\x54\x45\x20\165\x73\145\x72\x73\x20\x53\x45\124\40\12\x20\x20\x20\x20\x20\x20\40\x20\x20\40\40\40\40\40\x20\x20\x20\40\40\x20\x6e\x61\155\141\137\x6c\x65\x6e\x67\153\141\160\x20\x3d\x20\x27{$nama_lengkap}\x27\x2c\xa\x20\40\40\40\40\x20\40\40\x20\x20\40\40\x20\x20\40\40\x20\40\40\x20\x75\x73\x65\x72\x6e\141\155\145\x20\75\x20\x27{$username}\x27\x2c\12\40\x20\x20\x20\40\40\x20\40\x20\40\x20\40\40\40\40\40\40\x20\40\x20\145\x6d\141\151\154\40\75\x20\47{$email}\x27\54\xa\40\40\x20\x20\40\40\x20\x20\40\40\x20\40\40\40\40\40\40\x20\40\x20\x6e\157\137\x74\x65\154\x65\160\157\156\x20\75\40\x27{$no_telepon}\x27\x2c\xa\40\x20\40\x20\x20\x20\x20\40\40\40\40\40\40\x20\x20\40\40\x20\x20\x20\165\163\145\162\137\151\144\40\75\40" . ($user_id ? $user_id : "\116\x55\114\114") . "\54\12\x20\x20\40\x20\x20\40\x20\40\x20\40\40\40\x20\40\40\40\40\x20\x20\x20\x72\x6f\154\145\x20\75\40\47{$role}\x27\54\12\40\x20\x20\40\x20\40\40\40\40\40\40\40\40\x20\40\x20\40\x20\40\40\x73\x74\x61\x74\165\163\40\x3d\x20\x27{$status}\x27\54\xa\x20\x20\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x20\40\x20\40\165\x70\144\141\164\x65\x64\x5f\141\164\x20\75\40\x4e\x4f\127\x28\51"; if (!empty($password)) { $hashed_password = password_hash($password, PASSWORD_DEFAULT); $update_query .= "\54\x20\160\141\163\163\x77\x6f\162\144\x20\x3d\x20\x27{$hashed_password}\47"; } $update_query .= "\40\x57\110\105\122\105\x20\x75\x73\145\x72\x5f\x69\144\40\x3d\40{$user_id}"; if (mysqli_query($connection, $update_query)) { setFlashMessage("\x73\x75\143\x63\x65\x73\x73", "\342\x9c\x85\x20\x44\x61\x74\141\40\165\163\x65\162\x20\x62\145\x72\150\x61\x73\151\154\40\144\151\160\145\x72\x62\141\162\165\x69\41"); header("\114\157\143\141\x74\151\157\x6e\x3a\x20\151\x6e\144\x65\170\56\160\150\x70"); die; } else { setFlashMessage("\145\162\162\x6f\162", "\342\235\x8c\40\x47\141\147\x61\154\40\155\x65\155\x70\x65\162\x62\x61\162\165\151\40\x75\163\145\x72\x3a\40" . mysqli_error($connection)); } } } } } goto VJuHt; zIORs: $result = mysqli_query($connection, $query); goto v0dqf; a6Ypq: echo htmlspecialchars($edit_user["\x6e\x61\155\x61\x5f\154\145\156\147\153\x61\x70"]); goto JboZS; TGmdP: requireAdmin(); goto PzXwH; eaWQT: ?>
"required><div class="form-text">Username harus unik</div></div><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-envelope"></i>Email <span class="required">*</span></label> <input class="form-control"name="email"placeholder="user@example.com"value="<?php  goto ACUc3; Hz7wm: echo $edit_user["\x72\x6f\x6c\x65"] == "\101\144\x6d\x69\x6e" ? "\163\x65\154\145\x63\x74\145\x64" : ''; goto aiEAR; tQEoH: echo $edit_user["\x73\x74\141\x74\x75\163"] == "\123\x75\163\x70\x65\156\144\145\x64" ? "\x73\x65\x6c\x65\x63\x74\145\x64" : ''; goto tTS93; VJuHt: $flash = getFlashMessage(); goto JbT9S; BoDwe: echo htmlspecialchars($edit_user["\156\x6f\137\164\x65\154\x65\160\157\156"]); goto D0gOw; aiEAR: ?>
>Admin</option><option value="User"<?php  goto evTw3; sCAGS: $dept_query = mysqli_query($connection, "\123\x45\114\x45\x43\x54\40\x2a\x20\106\x52\117\115\40\x75\163\145\x72\163\x20\117\x52\x44\x45\x52\x20\x42\x59\x20\144\145\160\141\162\164\x65\155\145\x6e\x20\x41\x53\x43"); goto XB3_3; PzXwH: $user = getCurrentUser(); goto MRAce; KNwWG: require_once __DIR__ . "\57\56\56\x2f\56\56\x2f\x6c\151\x62\x2f\x61\165\x74\150\x2e\160\150\x70"; goto TGmdP; Q1xPf: require_once __DIR__ . "\57\x2e\x2e\57\56\56\57\143\x6f\x6e\146\151\147\x2f\144\141\164\x61\x62\x61\163\x65\x2e\160\x68\x70"; goto DEwZr; dodwF: echo strtoupper(substr($edit_user["\156\141\x6d\x61\x5f\x6c\145\156\147\153\x61\160"], 0, 2)); goto S_v1O; MRAce: $user_id = isset($_GET["\151\144"]) ? (int) $_GET["\x69\x64"] : 0; goto dgowS; zbTZL: ?>
>User</option></select></div><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-toggle-on"></i>Status <span class="required">*</span></label> <select class="form-select"name="status"required><option value="Active"<?php  goto EWwn1; CCvJe: include __DIR__ . "\x2f\56\x2e\57\x2e\56\x2f\166\151\145\x77\x73\57\x64\145\x66\x61\x75\x6c\164\x2f\x73\x69\x64\x65\142\141\x72\137\x61\144\x6d\x69\156\x2e\x70\x68\160"; goto Xf29i; B55x2: echo htmlspecialchars($edit_user["\165\x73\x65\162\156\141\155\145"]); goto eaWQT; VQLfR: ?>
>Active</option><option value="Inactive"<?php  goto Skc5d; LyXXx: $query = "\123\x45\x4c\x45\103\124\40\52\x20\106\x52\x4f\115\40\165\x73\145\162\163\40\x57\x48\105\122\x45\x20\165\163\x65\x72\137\x69\144\x20\75\40{$user_id}"; goto zIORs; evTw3: echo $edit_user["\x72\157\154\x65"] == "\x55\163\x65\x72" ? "\163\x65\154\x65\x63\164\x65\x64" : ''; goto zbTZL; ib73d: ?>
<div class="form-card"><div class="card-header"><h5 class="mb-0"><i class="fas me-2 fa-edit"></i>Form Edit User</h5></div><div class="card-body"><div class="avatar-preview"><?php  goto dodwF; Rjj28: ?>
>Inactive</option><option value="Suspended"<?php  goto tQEoH; LQv7j: $edit_user = mysqli_fetch_assoc($result); goto sCAGS; GN3R7: ?>
</select></div><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-user-tag"></i>Role <span class="required">*</span></label> <select class="form-select"name="role"required><option value="">-- Pilih Role --</option><option value="Admin"<?php  goto Hz7wm; ACUc3: echo htmlspecialchars($edit_user["\x65\x6d\x61\151\x6c"]); goto k84_p; dgowS: if ($user_id == 0) { setFlashMessage("\x65\162\x72\x6f\x72", "\x49\104\x20\x75\x73\x65\162\x20\x74\151\x64\141\x6b\40\x76\x61\x6c\x69\144\x21"); header("\x4c\x6f\143\141\164\151\x6f\156\72\40\151\x6e\144\145\x78\56\x70\x68\160"); die; } goto LyXXx; JboZS: ?>
"required></div><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-at"></i>Username <span class="required">*</span></label> <input class="form-control"name="username"placeholder="Masukkan username"value="<?php  goto B55x2; tTS93: ?>
>Suspended</option></select></div><div class="col-md-6 mb-3"><label class="form-label"><i class="fas fa-lock"></i>Password Baru</label> <input class="form-control"name="password"placeholder="Kosongkan jika tidak ingin mengubah password"type="password"><div class="form-text">Minimal 6 karakter. Kosongkan jika tidak ingin mengubah.</div></div></div><hr class="my-4"><div class="d-flex gap-2"><button class="btn btn-primary flex-fill"type="submit"><i class="fas me-2 fa-save"></i>Simpan Perubahan</button> <a class="btn btn-secondary"href="index.php"><i class="fas me-2 fa-times"></i>Batal</a></div></form></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script><script>// Auto dismiss alerts
document.addEventListener('DOMContentLoaded', function() {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
        setTimeout(() => {
            const bsAlert = new bootstrap.Alert(alert);
            bsAlert.close();
        }, 5000);
    });
});</script></body></html>