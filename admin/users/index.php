<?php
 goto Eh_5E; pzXH5: while ($dept = mysqli_fetch_assoc($dept_query)) { ?>
<option value="<?php  echo htmlspecialchars($dept["\144\145\x70\x61\162\x74\145\x6d\x65\156"]); ?>
"<?php  echo $departemen == $dept["\x64\x65\x70\141\x72\164\x65\x6d\145\x6e"] ? "\x73\x65\154\145\143\x74\x65\144" : ''; ?>
><?php  echo htmlspecialchars($dept["\144\x65\160\x61\x72\164\x65\x6d\x65\156"]); ?>
</option><?php  } goto X4rNd; wYdSz: if (!empty($status)) { $status_safe = mysqli_real_escape_string($connection, $status); $query .= "\40\101\x4e\104\x20\x73\164\x61\x74\165\163\x20\75\x20\x27{$status_safe}\x27"; } goto CQdv7; Ayx4H: echo $role == "\x75\x73\x65\x72" ? "\163\x65\x6c\x65\x63\x74\145\144" : ''; goto uLmWT; EeWMu: ?>
<div class="filter-card"><form class="g-3 row"><div class="col-md-3"><label class="text-muted form-label mb-1 small"><i class="fas me-1 fa-search"></i>Cari User</label> <input class="form-control"name="search"placeholder="Nama, email, atau username..."value="<?php  goto fm4pY; CQdv7: if (!empty($departemen)) { $departemen_safe = mysqli_real_escape_string($connection, $departemen); $query .= "\x20\x41\x4e\x44\40\144\145\160\141\x72\x74\145\x6d\145\156\40\x3d\x20\x27{$departemen_safe}\47"; } goto asf19; uLmWT: ?>
>User</option></select></div><div class="col-md-2"><label class="text-muted form-label mb-1 small"><i class="fas me-1 fa-toggle-on"></i>Status</label> <select class="form-select"name="status"><option value="">Semua Status</option><option value="active"<?php  goto KORf6; ucYJb: requireAdmin(); goto Y3XXe; iFVk9: $search = $_GET["\163\145\x61\162\143\150"] ?? ''; goto rPsoY; v8U6V: if (!empty($role)) { $role_safe = mysqli_real_escape_string($connection, $role); $query .= "\40\101\x4e\104\40\162\157\154\x65\x20\x3d\40\47{$role_safe}\47"; } goto wYdSz; fm4pY: echo htmlspecialchars($search); goto wuVZc; IBImC: ?>
>Blocked</option></select></div><div class="col-md-2"><label class="text-muted form-label mb-1 small"><i class="fas me-1 fa-building"></i>Departemen</label> <select class="form-select"name="departemen"><option value="">Semua Departemen</option><?php  goto JugMP; b6Znn: ?>
<!doctypehtml><html lang="id"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1"name="viewport"><title>Kelola User - Admin</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"rel="stylesheet"><style>@import url(https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap);:root{--primary:#2563eb;--primary-dark:#1e40af;--secondary:#3b82f6;--success:#059669;--warning:#d97706;--danger:#dc2626;--info:#0891b2;--dark:#1e293b;--light:#f8fafc}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Poppins,sans-serif;background:#f1f5f9;min-height:100vh;position:relative;overflow-x:hidden}body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#e0f2fe 0,#dbeafe 50%,#e0e7ff 100%);z-index:0;pointer-events:none}.content{margin-left:260px;padding:40px;position:relative;z-index:1}.page-header{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;padding:25px 30px;margin-bottom:30px;box-shadow:0 4px 20px rgba(0,0,0,.08);border:1px solid rgba(255,255,255,.3)}.page-header h2{color:var(--dark);font-weight:700;margin:0;font-size:1.75rem}.alert-modern{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:15px;border:none;box-shadow:0 4px 20px rgba(0,0,0,.08);padding:20px}.filter-card{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;box-shadow:0 4px 20px rgba(0,0,0,.08);border:1px solid rgba(255,255,255,.3);padding:25px;margin-bottom:30px}.table-card{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;box-shadow:0 4px 20px rgba(0,0,0,.08);overflow:hidden;border:1px solid rgba(255,255,255,.3)}.table-card .card-header{background:linear-gradient(135deg,#2563eb,#1e40af);color:#fff;padding:20px 25px;border:none;font-weight:600}.table thead th{background:#f8fafc;color:var(--dark);font-weight:600;border:none;padding:16px;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.table tbody tr{transition:all .3s;border-bottom:1px solid #f1f5f9}.table tbody tr:hover{background:linear-gradient(90deg,rgba(37,99,235,.04) 0,transparent 100%);transform:scale(1.001)}.table tbody td{padding:18px 16px;vertical-align:middle;border:none}.badge{padding:6px 14px;border-radius:8px;font-weight:500;font-size:.75rem;letter-spacing:.3px}.badge-role-admin{background:linear-gradient(135deg,#2563eb,#1e40af);color:#fff;box-shadow:0 2px 8px rgba(37,99,235,.3)}.badge-role-user{background:linear-gradient(135deg,#059669,#047857);color:#fff;box-shadow:0 2px 8px rgba(5,150,105,.3)}.badge-status-active{background:linear-gradient(135deg,#10b981,#059669);color:#fff;box-shadow:0 2px 8px rgba(16,185,129,.3)}.badge-status-pending{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;box-shadow:0 2px 8px rgba(245,158,11,.3)}.badge-status-blocked{background:linear-gradient(135deg,#dc2626,#b91c1c);color:#fff;box-shadow:0 2px 8px rgba(220,38,38,.3)}.btn{border-radius:10px;font-weight:500;padding:8px 16px;transition:all .3s;border:none}.btn-sm{padding:6px 12px;font-size:.85rem}.btn-primary{background:linear-gradient(135deg,#2563eb,#1e40af);color:#fff;box-shadow:0 4px 12px rgba(37,99,235,.3)}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(37,99,235,.4);color:#fff}.btn-secondary{background:#64748b;color:#fff}.btn-secondary:hover{background:#475569;color:#fff;transform:translateY(-2px)}.btn-success{background:linear-gradient(135deg,#059669,#047857);color:#fff;box-shadow:0 2px 8px rgba(5,150,105,.3)}.btn-success:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(5,150,105,.4);color:#fff}.btn-warning{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;box-shadow:0 2px 8px rgba(245,158,11,.3)}.btn-warning:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(245,158,11,.4);color:#fff}.btn-danger{background:linear-gradient(135deg,#dc2626,#b91c1c);color:#fff;box-shadow:0 2px 8px rgba(220,38,38,.3)}.btn-danger:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(220,38,38,.4);color:#fff}.btn-info{background:linear-gradient(135deg,#0891b2,#0e7490);color:#fff;box-shadow:0 2px 8px rgba(8,145,178,.3)}.btn-info:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(8,145,178,.4);color:#fff}.form-control,.form-select{border-radius:10px;border:2px solid #e2e8f0;padding:10px 15px;transition:all .3s}.form-control:focus,.form-select:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.1)}.user-card{background:linear-gradient(135deg,#eff6ff 0,#dbeafe 100%);border-radius:15px;padding:20px;margin:20px 15px;box-shadow:0 4px 12px rgba(0,0,0,.05);border:1px solid rgba(37,99,235,.1)}.user-avatar{width:45px;height:45px;background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;color:var(--primary);margin-right:12px;box-shadow:0 2px 8px rgba(37,99,235,.15)}.empty-state{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);border-radius:20px;padding:60px 20px;text-align:center;box-shadow:0 4px 20px rgba(0,0,0,.08)}.empty-state i{font-size:4rem;color:#cbd5e1;margin-bottom:20px}.empty-state h5{color:var(--dark);font-weight:600;margin-bottom:10px}@media (max-width:768px){.sidebar{transform:translateX(-100%)}.content{margin-left:0;padding:20px}}</style></head><body><?php  goto EthEx; twIRL: $departemen = $_GET["\144\145\x70\x61\162\164\x65\x6d\x65\156"] ?? ''; goto BKKr_; SYI2s: if ($flash) { ?>
<div class="alert alert-<?php  echo $flash["\x74\x79\x70\x65"]; ?>
alert-modern alert-dismissible fade show mb-4"><i class="fas fa-<?php  echo $flash["\164\x79\160\x65"] == "\163\165\x63\x63\x65\163\x73" ? "\x63\x68\x65\x63\x6b\x2d\143\x69\x72\x63\154\145" : "\x65\170\143\x6c\x61\x6d\141\x74\x69\x6f\156\55\143\151\x72\143\x6c\145"; ?>
me-2"></i><?php  echo htmlspecialchars($flash["\155\145\163\163\x61\147\x65"]); ?>
<button class="btn-close"type="button"data-bs-dismiss="alert"></button></div><?php  } goto EeWMu; D9Zhy: if ($result && mysqli_num_rows($result) > 0) { ?>
<div class="table-responsive"><table class="mb-0 table table-hover"><thead><tr><th>User</th><th>Email</th><th>No. Telepon</th><th>Departemen</th><th>Role</th><th>Status</th><th>Terdaftar</th><th>Aksi</th></tr></thead><tbody><?php  while ($u = mysqli_fetch_assoc($result)) { $initials = strtoupper(substr($u["\x6e\141\155\141\137\154\145\x6e\x67\153\x61\160"], 0, 2)); ?>
<tr><td><div class="d-flex align-items-center"><div class="user-avatar"><?php  echo $initials; ?>
</div><div><strong style="color:var(--dark);display:block"><?php  echo htmlspecialchars($u["\x6e\x61\155\x61\137\154\145\x6e\147\x6b\x61\160"]); ?>
</strong><small class="text-muted"><i class="fas fa-at"style="font-size:.7rem"></i><?php  echo htmlspecialchars($u["\x75\163\145\162\156\141\155\145"]); ?>
</small></div></div></td><td><i class="fas me-1 text-muted fa-envelope"style="font-size:.85rem"></i><?php  echo htmlspecialchars($u["\x65\x6d\141\x69\x6c"]); ?>
</td><td><i class="fas me-1 text-muted fa-phone"style="font-size:.85rem"></i><?php  echo htmlspecialchars($u["\156\x6f\137\164\x65\154\145\x70\157\x6e"]); ?>
</td><td><i class="fas me-1 text-muted fa-building"style="font-size:.85rem"></i><?php  echo htmlspecialchars($u["\144\x65\x70\x61\162\x74\x65\x6d\x65\x6e"]); ?>
</td><td><span class="badge badge-role-<?php  echo $u["\162\x6f\x6c\x65"]; ?>
"><i class="fas fa-<?php  echo $u["\162\157\x6c\145"] == "\x61\x64\x6d\151\x6e" ? "\x75\x73\145\162\x2d\163\x68\151\145\154\144" : "\x75\163\145\x72"; ?>
me-1"></i><?php  echo ucfirst($u["\162\157\154\x65"]); ?>
</span></td><td><span class="badge badge-status-<?php  echo $u["\163\x74\x61\x74\165\163"]; ?>
"><i class="fas fa-<?php  echo $u["\163\164\141\x74\x75\x73"] == "\x61\x63\164\x69\166\145" ? "\143\150\x65\x63\x6b\x2d\143\151\162\143\154\x65" : ($u["\x73\x74\141\x74\x75\163"] == "\x70\x65\x6e\x64\x69\x6e\x67" ? "\x63\154\x6f\143\153" : "\x62\x61\156"); ?>
me-1"></i><?php  echo ucfirst($u["\x73\164\x61\164\x75\x73"]); ?>
</span></td><td><small class="text-muted"><?php  echo date("\144\57\155\57\x59", strtotime($u["\x63\162\145\141\x74\x65\144\x5f\x61\164"])); ?>
</small></td><td><div class="d-flex gap-1"><?php  if ($u["\x73\x74\x61\164\x75\163"] == "\x70\x65\x6e\x64\151\x6e\x67") { ?>
<a href="approve.php?id=<?php  echo $u["\x75\163\x65\x72\137\151\144"]; ?>
"class="btn btn-sm btn-success"title="Approve User"><i class="fas fa-check"></i> </a><a href="reject.php?id=<?php  echo $u["\165\x73\145\x72\137\151\144"]; ?>
"class="btn btn-sm btn-danger"title="Reject User"onclick='return confirm("Yakin ingin menolak user ini?")'><i class="fas fa-times"></i> </a><?php  } elseif ($u["\x73\x74\x61\x74\x75\163"] == "\141\x63\x74\x69\166\145") { ?>
<a href="edit.php?id=<?php  echo $u["\165\163\x65\162\137\x69\x64"]; ?>
"class="btn btn-sm btn-info"title="Edit User"><i class="fas fa-edit"></i> </a><a href="block.php?id=<?php  echo $u["\165\163\x65\x72\x5f\151\144"]; ?>
"class="btn btn-sm btn-warning"title="Block User"onclick='return confirm("Yakin ingin memblokir user ini?")'><i class="fas fa-ban"></i> </a><?php  } else { ?>
<a href="unblock.php?id=<?php  echo $u["\x75\163\145\162\137\x69\144"]; ?>
"class="btn btn-sm btn-success"title="Unblock User"><i class="fas fa-check-circle"></i> </a><?php  } ?>
</div></td></tr><?php  } ?>
</tbody></table></div><?php  } else { ?>
<div class="empty-state"><i class="fas fa-users-slash"></i><h5>Tidak Ada User Ditemukan</h5><p class="text-muted mb-3"><?php  if (!empty($search) || !empty($role) || !empty($status) || !empty($departemen)) { ?>
Tidak ada user yang sesuai dengan filter Anda. <a href="index.php">Reset filter</a><?php  } else { ?>
Belum ada user yang terdaftar dalam sistem.<?php  } ?>
</p></div><?php  } goto ZkUGj; EthEx: include __DIR__ . "\x2f\x2e\x2e\x2f\x2e\56\x2f\x76\151\x65\167\x73\57\x64\145\146\141\165\154\x74\57\163\x69\144\145\142\x61\x72\x5f\141\144\x6d\151\156\x2e\160\x68\x70"; goto ENk3c; gTJhq: $dept_query = mysqli_query($connection, "\x53\105\x4c\x45\103\124\40\104\111\x53\x54\x49\116\x43\x54\x20\144\145\x70\x61\162\x74\x65\155\x65\156\x20\x46\122\x4f\115\x20\x75\163\145\x72\x73\40\127\x48\105\122\105\40\x64\145\160\141\x72\164\145\155\145\x6e\40\x49\x53\40\x4e\x4f\x54\40\116\125\114\114\x20\x41\116\x44\40\144\145\x70\x61\162\x74\145\x6d\145\x6e\40\41\x3d\40\47\47\40\x4f\122\x44\105\x52\40\102\x59\x20\144\x65\x70\x61\x72\x74\x65\x6d\145\x6e"); goto ofYhO; rPsoY: $role = $_GET["\x72\157\154\x65"] ?? ''; goto uJxrN; uJxrN: $status = $_GET["\163\x74\x61\164\165\163"] ?? ''; goto twIRL; ENk3c: ?>
<div class="content"><div class="page-header"><h2><i class="fas me-2 fa-users"style="color:var(--primary)"></i>Kelola User</h2><p class="text-muted mb-0"style="font-size:.95rem">Manajemen user dan hak akses sistem</p></div><?php  goto SYI2s; K2oL2: if (!empty($search)) { $search_safe = mysqli_real_escape_string($connection, $search); $query .= "\x20\x41\x4e\x44\x20\x28\x6e\x61\x6d\x61\137\154\x65\156\147\x6b\141\160\40\x4c\x49\x4b\105\40\47\x25{$search_safe}\45\x27\x20\117\x52\40\145\155\x61\151\x6c\x20\114\111\113\x45\x20\x27\45{$search_safe}\x25\x27\x20\117\122\40\165\x73\145\162\x6e\141\x6d\145\x20\x4c\x49\113\105\40\47\x25{$search_safe}\x25\47\x29"; } goto v8U6V; DqIwG: require_once __DIR__ . "\57\56\x2e\x2f\56\56\57\143\157\156\146\x69\147\57\144\141\x74\x61\x62\x61\163\x65\56\160\150\160"; goto DuLbi; KY_6f: $user = $admin; goto iFVk9; Eh_5E: session_start(); goto DqIwG; ZCDyg: ?>
>Admin</option><option value="user"<?php  goto Ayx4H; X4rNd: ?>
</select></div><div class="d-flex align-items-end col-md-3 gap-2"><button class="btn btn-primary flex-fill"type="submit"><i class="fas me-1 fa-filter"></i> Terapkan Filter</button> <a href="index.php"class="btn btn-secondary"><i class="fas fa-redo"></i></a></div></form></div><div class="card table-card"><div class="card-header"><h5 class="mb-0"><i class="fas me-2 fa-list"></i>Daftar User</h5></div><div class="card-body p-0"><?php  goto D9Zhy; JugMP: mysqli_data_seek($dept_query, 0); goto pzXH5; qJIcB: echo $status == "\160\145\x6e\x64\x69\156\x67" ? "\163\x65\x6c\145\x63\164\145\x64" : ''; goto EMW6a; EMW6a: ?>
>Pending</option><option value="blocked"<?php  goto KV1GY; KORf6: echo $status == "\x61\x63\x74\151\x76\x65" ? "\x73\x65\154\x65\143\164\145\x64" : ''; goto eLkv6; lSJW1: echo $role == "\141\x64\155\151\x6e" ? "\x73\x65\x6c\145\143\x74\145\x64" : ''; goto ZCDyg; umBVx: $result = mysqli_query($connection, $query); goto gTJhq; asf19: $query .= "\x20\x4f\x52\104\105\122\40\x42\131\40\x63\162\145\x61\164\x65\144\137\141\x74\x20\104\x45\x53\103"; goto umBVx; wuVZc: ?>
"></div><div class="col-md-2"><label class="text-muted form-label mb-1 small"><i class="fas me-1 fa-user-tag"></i>Role</label> <select class="form-select"name="role"><option value="">Semua Role</option><option value="admin"<?php  goto lSJW1; DuLbi: require_once __DIR__ . "\x2f\x2e\x2e\57\56\56\57\154\151\142\x2f\x66\165\x6e\143\x74\151\x6f\x6e\163\56\x70\150\160"; goto wdRNX; ofYhO: $flash = getFlashMessage(); goto b6Znn; KV1GY: echo $status == "\142\154\x6f\x63\x6b\x65\x64" ? "\x73\145\154\x65\143\164\145\144" : ''; goto IBImC; BKKr_: $query = "\123\x45\x4c\x45\103\124\40\52\x20\106\122\117\x4d\40\165\x73\x65\x72\x73\40\x57\110\105\122\105\40\61\75\x31"; goto K2oL2; wdRNX: require_once __DIR__ . "\x2f\56\x2e\57\x2e\x2e\57\154\x69\142\57\x61\165\164\x68\56\x70\150\x70"; goto ucYJb; Y3XXe: $admin = getCurrentUser(); goto KY_6f; eLkv6: ?>
>Active</option><option value="pending"<?php  goto qJIcB; ZkUGj: ?>
</div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script><script>// Auto dismiss alerts after 5 seconds
document.addEventListener('DOMContentLoaded', function() {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
        setTimeout(() => {
            const bsAlert = new bootstrap.Alert(alert);
            bsAlert.close();
        }, 5000);
    });
});</script></body></html>