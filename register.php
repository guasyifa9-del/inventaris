<?php
 goto YSMU_; YSMU_: session_start(); goto J4w0A; H1kpS: $error = ''; goto IsHnA; IsHnA: $departemen_list = array("\110\122", "\x49\x54", "\x46\x69\156\141\156\143\145", "\x4d\141\x72\x6b\x65\x74\151\x6e\x67", "\117\160\145\x72\x61\163\x69\157\156\141\x6c", "\120\x72\x6f\144\165\x6b\x73\x69", "\114\x61\151\156\156\x79\x61"); goto KArl3; NprOx: if ($success) { ?>
<div class="alert alert-dismissible fade show alert-success"><i class="fas me-2 fa-check-circle"></i><?php  echo htmlspecialchars($success); ?>
<button class="btn-close"type="button"data-bs-dismiss="alert"></button></div><div class="text-center"><a class="btn btn-lg btn-primary"href="login.php"><i class="fas me-2 fa-sign-in-alt"></i>Login Sekarang</a></div><?php  } else { if ($error) { ?>
<div class="alert alert-dismissible fade show alert-danger"><i class="fas me-2 fa-exclamation-circle"></i><?php  echo htmlspecialchars($error); ?>
<button class="btn-close"type="button"data-bs-dismiss="alert"></button></div><?php  } ?>
<form action=""method="POST"><label class="fw-bold form-label mb-3">Daftar sebagai:</label><div class="role-selector"><label class="role-card active kepala"id="role-kepala"><input name="jenis_pengguna"type="radio"value="kepala_departemen"checked><div class="role-icon">üè¢</div><h6>Kepala Departemen</h6><small class="text-warning"><i class="fas fa-clock"></i> Butuh approval</small></label> <label class="role-card manager"id="role-manager"><input name="jenis_pengguna"type="radio"value="inventory_manager"><div class="role-icon">üë®‚Äçüíº</div><h6>Inventory Manager</h6><small class="text-warning"><i class="fas fa-clock"></i> Butuh approval</small></label></div><div class="info-box"id="info-box"><i class="fas fa-exclamation-triangle text-warning"></i> <strong>Perhatian:</strong> Semua pendaftaran memerlukan persetujuan Inventory Manager yang aktif sebelum dapat digunakan.</div><div class="row"><div class="mb-3 col-md-6"><label class="fw-bold form-label">Username <span class="text-danger">*</span></label> <input name="username"class="form-control"placeholder="Contoh: kepala.hr"required></div><div class="mb-3 col-md-6"><label class="fw-bold form-label">Nama Lengkap <span class="text-danger">*</span></label> <input name="nama_lengkap"class="form-control"placeholder="Contoh: Budi Hartono"required></div></div><div class="row"><div class="mb-3 col-md-6"><label class="fw-bold form-label">Password <span class="text-danger">*</span></label> <input name="password"class="form-control"placeholder="Min. 6 karakter"required type="password"></div><div class="mb-3 col-md-6"><label class="fw-bold form-label">Konfirmasi Password <span class="text-danger">*</span></label> <input name="confirm_password"class="form-control"placeholder="Ulangi password"required type="password"></div></div><div class="mb-3"><label class="fw-bold form-label">Email</label> <input name="email"class="form-control"placeholder="contoh@email.com"type="email"></div><div class="row"><div class="mb-3 col-md-6"><label class="fw-bold form-label">No. Telepon</label> <input name="no_telepon"class="form-control"placeholder="08123456789"></div><div class="mb-3 col-md-6"><label class="fw-bold form-label">Departemen <span class="text-danger">*</span></label> <select class="form-select"name="departemen"required><option value="">-- Pilih Departemen --</option><?php  foreach ($departemen_list as $dept) { ?>
<option value="<?php  echo $dept; ?>
"><?php  echo $dept; ?>
</option><?php  } ?>
</select></div></div><button class="btn btn-register"type="submit"><i class="fas me-2 fa-user-plus"></i>DAFTAR SEKARANG</button></form><div class="text-center mt-4"><p class="mb-2 text-muted">Sudah punya akun?</p><a class="fw-bold text-decoration-none"href="login.php"style="color:#667eea"><i class="fas fa-sign-in-alt me-1"></i>Login Sekarang</a></div><?php  } goto lDs9l; X82ka: $success = ''; goto H1kpS; J4w0A: if (isset($_SESSION["\x75\x73\145\162\x5f\151\144"])) { if ($_SESSION["\162\157\154\x65"] == "\151\x6e\x76\145\156\164\157\x72\171\x5f\x6d\141\x6e\x61\x67\x65\162") { header("\x4c\x6f\143\141\164\151\157\156\72\x20\x61\144\155\x69\x6e\x2f\144\x61\163\x68\x62\x6f\x61\162\x64\56\160\150\160"); } else { header("\x4c\157\x63\141\x74\151\157\x6e\72\40\165\163\145\x72\x2f\x64\141\x73\150\142\x6f\x61\x72\144\56\x70\150\x70"); } die; } goto X82ka; KArl3: if ($_SERVER["\x52\105\121\x55\x45\x53\x54\137\x4d\105\x54\x48\117\x44"] == "\x50\117\123\x54") { require_once "\x63\157\x6e\146\151\147\57\144\141\x74\x61\142\x61\x73\x65\x2e\160\x68\x70"; $username = trim($_POST["\165\x73\x65\x72\x6e\x61\x6d\145"] ?? ''); $password = trim($_POST["\x70\141\x73\x73\x77\157\x72\144"] ?? ''); $confirm_password = trim($_POST["\x63\157\x6e\x66\151\162\x6d\137\160\x61\163\x73\x77\x6f\162\x64"] ?? ''); $nama_lengkap = trim($_POST["\x6e\141\x6d\141\x5f\154\145\156\x67\153\x61\160"] ?? ''); $email = trim($_POST["\x65\155\141\x69\x6c"] ?? ''); $no_telepon = trim($_POST["\x6e\157\137\x74\x65\154\145\160\157\156"] ?? ''); $departemen = trim($_POST["\144\145\160\141\x72\164\x65\155\x65\x6e"] ?? ''); $jenis_pengguna = $_POST["\x6a\x65\x6e\x69\x73\x5f\x70\x65\x6e\147\147\165\x6e\141"] ?? "\153\x65\x70\141\x6c\141\x5f\x64\145\x70\x61\162\x74\145\155\x65\x6e"; if (empty($username) || empty($password) || empty($nama_lengkap)) { $error = "\125\163\145\x72\156\141\x6d\x65\54\40\x70\x61\x73\163\x77\x6f\162\x64\54\x20\144\x61\156\40\156\x61\x6d\x61\x20\154\x65\156\x67\153\x61\x70\40\150\x61\162\x75\163\40\144\151\x69\163\151\x21"; } elseif ($password !== $confirm_password) { $error = "\120\x61\163\163\167\x6f\x72\144\40\x64\x61\x6e\40\x6b\x6f\156\146\151\162\x6d\x61\163\x69\40\x70\141\x73\163\167\157\x72\144\40\x74\151\144\x61\x6b\40\163\x61\x6d\141\41"; } elseif (strlen($password) < 6) { $error = "\x50\x61\163\163\x77\x6f\162\x64\40\x6d\151\156\x69\155\x61\x6c\x20\x36\x20\153\x61\x72\x61\x6b\164\x65\162\41"; } elseif (empty($departemen)) { $error = "\x44\x65\160\141\162\x74\x65\x6d\x65\156\40\150\x61\x72\165\163\40\x64\151\x70\151\x6c\x69\x68\x21"; } else { $check_stmt = mysqli_prepare($connection, "\x53\105\x4c\x45\x43\x54\x20\165\163\145\x72\x5f\x69\144\x20\x46\x52\x4f\115\40\x75\x73\145\162\x73\x20\127\110\x45\122\x45\x20\x75\163\x65\162\156\141\155\x65\x20\75\x20\77"); mysqli_stmt_bind_param($check_stmt, "\x73", $username); mysqli_stmt_execute($check_stmt); $check_result = mysqli_stmt_get_result($check_stmt); if (mysqli_num_rows($check_result) > 0) { $error = "\125\163\x65\x72\x6e\141\x6d\x65\x20\x73\165\144\141\x68\40\144\x69\147\x75\156\x61\153\141\x6e\x21"; } else { $hashed_password = password_hash($password, PASSWORD_DEFAULT); if ($jenis_pengguna == "\x69\x6e\x76\x65\x6e\164\x6f\162\x79\x5f\x6d\141\x6e\x61\x67\x65\162") { $role = "\151\x6e\166\x65\x6e\x74\x6f\162\x79\137\155\x61\x6e\141\147\145\162"; $status = "\x70\x65\156\144\151\156\x67"; $jabatan = "\111\x6e\166\x65\156\164\157\162\x79\x20\115\141\156\x61\x67\145\x72"; } else { $role = "\153\x65\x70\x61\x6c\x61\137\x64\145\160\x61\162\x74\145\155\145\x6e"; $status = "\x70\x65\x6e\144\151\x6e\147"; $jabatan = "\113\x65\x70\x61\154\x61\x20\x44\145\160\141\162\x74\145\x6d\145\156\40" . $departemen; $jenis_pengguna = "\x6b\145\x70\x61\x6c\x61\x5f\144\x65\160\x61\162\x74\x65\x6d\x65\x6e"; } $insert_stmt = mysqli_prepare($connection, "\111\x4e\x53\x45\122\124\x20\111\x4e\124\x4f\40\165\x73\145\162\x73\x20\x28\x75\x73\145\x72\156\141\x6d\x65\54\x20\160\141\x73\x73\x77\157\x72\x64\x2c\40\156\x61\155\x61\x5f\154\145\156\147\x6b\141\x70\54\x20\x65\155\141\x69\x6c\x2c\40\x6e\x6f\137\164\145\154\145\x70\157\x6e\x2c\x20\x64\x65\x70\x61\162\164\145\x6d\x65\156\x2c\x20\162\157\154\x65\x2c\40\163\x74\x61\x74\165\x73\54\x20\x6a\x65\156\x69\x73\137\x70\145\x6e\x67\x67\x75\156\141\x2c\40\152\141\x62\x61\164\141\156\51\40\12\40\40\x20\40\x20\40\x20\40\40\x20\40\40\40\x20\x20\x20\40\126\101\x4c\x55\105\123\x20\50\x3f\54\x20\x3f\x2c\40\77\54\x20\77\x2c\40\x3f\x2c\x20\77\x2c\x20\77\54\x20\77\x2c\x20\77\54\x20\x3f\51"); mysqli_stmt_bind_param($insert_stmt, "\x73\163\x73\x73\x73\x73\163\163\x73\x73", $username, $hashed_password, $nama_lengkap, $email, $no_telepon, $departemen, $role, $status, $jenis_pengguna, $jabatan); if (mysqli_stmt_execute($insert_stmt)) { $success = "\x50\x65\156\144\x61\146\164\x61\x72\x61\156\x20\142\x65\162\x68\141\x73\x69\154\41\40\101\x6b\165\x6e\40\x41\x6e\144\141\x20\x6d\x65\x6e\165\x6e\x67\x67\165\40\x70\x65\162\x73\145\x74\165\152\x75\141\156\40\111\x6e\x76\x65\x6e\164\x6f\162\x79\x20\x4d\141\x6e\141\147\x65\x72\x2e\x20\x53\151\154\x61\153\141\x6e\x20\x68\x75\x62\x75\x6e\147\151\x20\111\x6e\x76\x65\156\164\157\x72\x79\x20\115\141\x6e\x61\x67\145\x72\40\x75\156\x74\165\153\x20\141\x6b\164\151\x76\141\163\x69\56"; $new_id = mysqli_insert_id($connection); $ip = $_SERVER["\122\x45\115\x4f\x54\x45\137\x41\x44\104\122"]; $log_stmt = mysqli_prepare($connection, "\111\x4e\x53\105\x52\124\40\111\x4e\124\117\x20\x6c\157\147\x5f\141\x6b\x74\x69\166\151\164\x61\163\x20\50\165\163\x65\x72\x5f\x69\144\x2c\x20\141\x6b\x74\151\166\151\164\x61\163\x2c\40\153\145\x74\x65\x72\141\156\147\141\156\54\40\x69\160\x5f\141\144\144\162\145\163\x73\51\40\x56\x41\x4c\x55\x45\123\x20\x28\x3f\54\x20\47\x52\105\x47\111\123\124\x45\122\47\x2c\40\77\x2c\40\77\x29"); $ket = "\122\x65\x67\x69\163\x74\x72\x61\163\151\x20\141\x6b\x75\x6e\40\142\x61\162\x75\40\163\x65\142\141\x67\141\151\40" . $jenis_pengguna . "\x20\144\151\x20\x64\x65\160\141\x72\164\x65\x6d\x65\156\40" . $departemen; mysqli_stmt_bind_param($log_stmt, "\x69\x73\x73", $new_id, $ket, $ip); mysqli_stmt_execute($log_stmt); } else { $error = "\x54\x65\x72\152\141\144\151\x20\153\145\163\x61\154\x61\150\141\156\x20\x73\141\141\x74\x20\155\145\x6e\144\x61\146\164\x61\162\41\40\x50\x61\x73\164\x69\x6b\x61\x6e\40\x64\141\164\x61\x62\141\x73\x65\40\163\x75\144\141\150\x20\144\151\x69\155\160\x6f\162\164\56"; } mysqli_stmt_close($insert_stmt); } mysqli_stmt_close($check_stmt); } } goto UKbx4; UKbx4: ?>
<!doctypehtml><html lang="id"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1"name="viewport"><title>Register - Inventaris Kantor</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box}body{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);min-height:100vh;padding:40px 20px;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}.register-container{background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden;max-width:600px;margin:0 auto}.register-header{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;padding:35px;text-align:center}.register-header h2{margin:10px 0;font-size:24px;font-weight:700}.register-header p{margin:0;opacity:.9;font-size:14px}.register-body{padding:35px}.role-selector{display:flex;gap:15px;margin-bottom:25px;justify-content:center}.role-card{flex:1;max-width:200px;border:3px solid #e5e7eb;border-radius:15px;padding:20px 15px;text-align:center;cursor:pointer;transition:all .3s;background:#fff}.role-card:hover{border-color:#667eea;transform:translateY(-5px);box-shadow:0 10px 30px rgba(102,126,234,.2)}.role-card.active{border-color:#667eea;background:linear-gradient(135deg,#f0f4ff 0,#e8f0fe 100%);box-shadow:0 5px 20px rgba(102,126,234,.3)}.role-card input[type=radio]{display:none}.role-icon{font-size:45px;margin-bottom:10px}.role-card h6{font-size:14px;font-weight:700;margin:0 0 5px 0;color:#333}.role-card small{font-size:11px;color:#666}.role-card.kepala .role-icon{color:#10b981}.role-card.manager .role-icon{color:#f59e0b}.form-control,.form-select{border-radius:10px;padding:12px 15px;border:2px solid #e5e7eb;font-size:14px}.form-control:focus,.form-select:focus{border-color:#667eea;box-shadow:0 0 0 .2rem rgba(102,126,234,.25)}.btn-register{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);border:none;padding:14px 30px;font-size:16px;font-weight:600;border-radius:10px;width:100%;color:#fff;transition:all .3s}.btn-register:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(102,126,234,.4);color:#fff}.info-box{background:#fffbeb;border:1px solid #fcd34d;border-radius:10px;padding:15px;margin-bottom:20px}.info-box i{margin-right:8px}@media (max-width:576px){.role-card{min-width:100px;padding:15px 10px}.role-icon{font-size:35px}.role-card h6{font-size:12px}}</style></head><body><div class="register-container"><div class="register-header"><div style="font-size:60px">üì¶</div><h2>Daftar Akun Baru</h2><p>Sistem Inventaris & Surat Peminjaman Kantor</p></div><div class="register-body"><?php  goto NprOx; lDs9l: ?>
</div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script><script>document.querySelectorAll('.role-card').forEach(card => {
            card.addEventListener('click', function() {
                // Remove active from all
                document.querySelectorAll('.role-card').forEach(c => c.classList.remove('active'));
                // Add active to clicked
                this.classList.add('active');
                // Check the radio
                this.querySelector('input[type="radio"]').checked = true;
            });
        });</script></body></html>